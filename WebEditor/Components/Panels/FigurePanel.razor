@using System.Diagnostics.CodeAnalysis;
@using CaptainCoder.TacticsEngine.Board
@inject ToolManager ToolManager
<div class="figure-panel">
    <h2>Figures</h2>
    @foreach(Figure figure in _figures)
    {
        <FigureRenderer Figure="@figure" OnDragStart="@OnDragStart"/>   
    }
</div>

@code
{
    [CascadingParameter, EditorRequired, AllowNull]
    public Board CurrentBoard { get; set; }
    private List<Figure> _figures = [
        new Figure() { Width = 1, Height = 1 },
        new Figure() { Width = 2, Height = 2 },
        new Figure() { Width = 1, Height = 2 },
        new Figure() { Width = 2, Height = 1 },
        new Figure() { Width = 3, Height = 2 },
        new Figure() { Width = 3, Height = 3 },
    ];

    private void OnDragStart(MouseEventArgs args, Figure figure)
    {
        ToolManager.StartDragFigure(CurrentBoard, new Positioned<Figure>(figure, new NoPosition()), new Position(0, 0));
    }
}
